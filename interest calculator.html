<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interest Calculator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
        }
        .result-box {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
            white-space: pre-line;
        }
        .radio-group {
            display: flex;
            gap: 15px;
            margin-bottom: 10px;
        }
        .radio-option {
            display: flex;
            align-items: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2 class="mb-4">Interest Calculator</h2>
        
        <div class="mb-3">
            <label for="amount" class="form-label">Amount (₹):</label>
            <input type="number" class="form-control" id="amount" step="0.01">
        </div>
        
        <div class="mb-3">
            <label for="startDate" class="form-label">Start Date:</label>
            <input type="date" class="form-control" id="startDate">
        </div>
        
        <div class="mb-3">
            <label for="endDate" class="form-label">End Date:</label>
            <input type="date" class="form-control" id="endDate">
        </div>
        
        <div class="mb-3">
            <label class="form-label">Interest Rate (%):</label>
            <div class="radio-group">
                <div class="radio-option">
                    <input class="form-check-input" type="radio" name="rate" id="rate1.5" value="1.5" checked>
                    <label class="form-check-label ms-2" for="rate1.5">1.5</label>
                </div>
                <div class="radio-option">
                    <input class="form-check-input" type="radio" name="rate" id="rate1.75" value="1.75">
                    <label class="form-check-label ms-2" for="rate1.75">1.75</label>
                </div>
                <div class="radio-option">
                    <input class="form-check-input" type="radio" name="rate" id="rate2.0" value="2.0">
                    <label class="form-check-label ms-2" for="rate2.0">2.0</label>
                </div>
                <div class="radio-option">
                    <input class="form-check-input" type="radio" name="rate" id="rate2.5" value="2.5">
                    <label class="form-check-label ms-2" for="rate2.5">2.5</label>
                </div>
                <div class="radio-option">
                    <input class="form-check-input" type="radio" name="rate" id="rate3.0" value="3.0">
                    <label class="form-check-label ms-2" for="rate3.0">3.0</label>
                </div>
            </div>
        </div>
        
        <div class="mb-3">
            <label class="form-label">Method:</label>
            <div class="radio-group">
                <div class="radio-option">
                    <input class="form-check-input" type="radio" name="method" id="methodKG" value="KG" checked>
                    <label class="form-check-label ms-2" for="methodKG">KG</label>
                </div>
                <div class="radio-option">
                    <input class="form-check-input" type="radio" name="method" id="methodBJ" value="BJ">
                    <label class="form-check-label ms-2" for="methodBJ">BJ</label>
                </div>
                <div class="radio-option">
                    <input class="form-check-input" type="radio" name="method" id="methodSRB" value="SRB">
                    <label class="form-check-label ms-2" for="methodSRB">SRB</label>
                </div>
            </div>
        </div>
        
        <button class="btn btn-primary" onclick="calculateInterest()">Calculate</button>
        
        <div id="result" class="result-box mt-4" style="display: none;"></div>
    </div>

    <script>
        function calculateInterest() {
            try {
                // Get input values
                const amount = parseFloat(document.getElementById('amount').value);
                const rate = parseFloat(document.querySelector('input[name="rate"]:checked').value);
                const method = document.querySelector('input[name="method"]:checked').value;
                const startDateStr = document.getElementById('startDate').value;
                const endDateStr = document.getElementById('endDate').value;
                
                // Validate inputs
                if (isNaN(amount)) throw new Error("Please enter a valid amount");
                if (!startDateStr || !endDateStr) throw new Error("Please select both dates");
                
                // Parse dates in DD-MM-YYYY format (like the Python version)
                const startParts = startDateStr.split('-');
                const endParts = endDateStr.split('-');
                const startDate = new Date(startParts[0], startParts[1] - 1, startParts[2]);
                const endDate = new Date(endParts[0], endParts[1] - 1, endParts[2]);
                
                if (endDate < startDate) throw new Error("End date must be after start date");
                
                // Calculate difference in months and days (matching Python's relativedelta)
                let months = (endDate.getFullYear() - startDate.getFullYear()) * 12;
                months += endDate.getMonth() - startDate.getMonth();
                
                let days = endDate.getDate() - startDate.getDate();
                if (days < 0) {
                    // Borrow a month
                    const lastMonth = new Date(endDate.getFullYear(), endDate.getMonth(), 0);
                    days += lastMonth.getDate();
                    months--;
                }
                
                // Calculate rounded months based on method
                let roundedMonths = getRoundedMonths(months, days);
                let interest = 0;
                let displayMonths = 0;
                
                // Calculate interest based on method (EXACTLY matching Python logic)
                if (method === "KG") {
                    interest = amount * (rate / 100) * roundedMonths;
                    displayMonths = roundedMonths;
                } 
                else if (method === "BJ") {
                    let interestMonths;
                    if (months === 0 && days >= 1 && days <= 15) {
                        interestMonths = 0.5;
                    } else if (months === 0 && days > 15) {
                        interestMonths = 1;
                    } else if (days > 15) {
                        interestMonths = months + 1;
                    } else if (days >= 4) {
                        interestMonths = months + 0.5;
                    } else {
                        interestMonths = months;
                    }
                    interest = amount * (rate / 100) * interestMonths;
                    
                    // Set display months for BJ method
                    if (months === 0 && days > 0) {
                        displayMonths = 1;
                    } else if (days > 15) {
                        displayMonths = months + 1;
                    } else if (days >= 4) {
                        displayMonths = months + 0.5;
                    } else {
                        displayMonths = months;
                    }
                } 
                else if (method === "SRB") {
                    if (roundedMonths > 1) {
                        interest = amount * (rate / 100) * (roundedMonths - 1);
                    } else {
                        interest = 0;
                    }
                    displayMonths = Math.max(roundedMonths - 1, 0);
                }
                
                const total = amount + interest;
                
                // Format the result (matching Python output)
                let result = `Interest: ₹${interest.toFixed(2)}\nTotal: ₹${total.toFixed(2)}\nMonths: ${months} months, ${days} days`;
                result += `\nDisplay Rule: ${displayMonths} months`;
                
                // Display the result
                const resultElement = document.getElementById('result');
                resultElement.textContent = result;
                resultElement.style.display = 'block';
                
            } catch (error) {
                const resultElement = document.getElementById('result');
                resultElement.textContent = "Error: " + error.message;
                resultElement.style.display = 'block';
            }
        }
        
        function getRoundedMonths(months, days) {
            // Exactly matches Python logic
            if (months === 0 && days > 0) {
                return 1;
            } else if (days >= 4) {
                return months + 1;
            } else {
                return months;
            }
        }
    </script>
</body>
</html>